(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[335],{8262:function(e,t,n){"use strict";n.d(t,{Z:function(){return W}});var r=n(3366),a=n(7462),s=n(7294),l=n(6010),i=n(7192),o=n(7579),c=n(8216),d=n(4024),p=n(6628),u=n(5113),m=n(7623),x=n(4786),f=n(2339);function h(e){return(0,f.Z)("MuiDialog",e)}var v=(0,n(6087).Z)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);var b=(0,s.createContext)({}),j=n(7227),w=n(2734),y=n(5893);const g=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],N=(0,x.ZP)(j.Z,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),S=(0,x.ZP)(d.Z,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),k=(0,x.ZP)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${(0,c.Z)(n.scroll)}`]]}})((({ownerState:e})=>(0,a.Z)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===e.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===e.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}))),Z=(0,x.ZP)(u.Z,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${(0,c.Z)(n.scroll)}`],t[`paperWidth${(0,c.Z)(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})((({theme:e,ownerState:t})=>(0,a.Z)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===t.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===t.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===t.maxWidth&&{maxWidth:"px"===e.breakpoints.unit?Math.max(e.breakpoints.values.xs,444):`${e.breakpoints.values.xs}${e.breakpoints.unit}`,[`&.${v.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},"xs"!==t.maxWidth&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${v.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${v.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})));var W=s.forwardRef((function(e,t){const n=(0,m.Z)({props:e,name:"MuiDialog"}),d=(0,w.Z)(),x={enter:d.transitions.duration.enteringScreen,exit:d.transitions.duration.leavingScreen},{"aria-describedby":f,"aria-labelledby":v,BackdropComponent:j,BackdropProps:W,children:P,className:C,disableEscapeKeyDown:E=!1,fullScreen:A=!1,fullWidth:D=!1,maxWidth:B="sm",onBackdropClick:M,onClose:T,open:$,PaperComponent:_=u.Z,PaperProps:L={},scroll:I="paper",TransitionComponent:R=p.Z,transitionDuration:F=x,TransitionProps:O}=n,K=(0,r.Z)(n,g),X=(0,a.Z)({},n,{disableEscapeKeyDown:E,fullScreen:A,fullWidth:D,maxWidth:B,scroll:I}),Y=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:a,fullScreen:s}=e,l={root:["root"],container:["container",`scroll${(0,c.Z)(n)}`],paper:["paper",`paperScroll${(0,c.Z)(n)}`,`paperWidth${(0,c.Z)(String(r))}`,a&&"paperFullWidth",s&&"paperFullScreen"]};return(0,i.Z)(l,h,t)})(X),q=s.useRef(),J=(0,o.Z)(v),H=s.useMemo((()=>({titleId:J})),[J]);return(0,y.jsx)(S,(0,a.Z)({className:(0,l.Z)(Y.root,C),BackdropProps:(0,a.Z)({transitionDuration:F,as:j},W),closeAfterTransition:!0,BackdropComponent:N,disableEscapeKeyDown:E,onClose:T,open:$,ref:t,onClick:e=>{q.current&&(q.current=null,M&&M(e),T&&T(e,"backdropClick"))},ownerState:X},K,{children:(0,y.jsx)(R,(0,a.Z)({appear:!0,in:$,timeout:F,role:"presentation"},O,{children:(0,y.jsx)(k,{className:(0,l.Z)(Y.container),onMouseDown:e=>{q.current=e.target===e.currentTarget},ownerState:X,children:(0,y.jsx)(Z,(0,a.Z)({as:_,elevation:24,role:"dialog","aria-describedby":f,"aria-labelledby":J},L,{className:(0,l.Z)(Y.paper,L.className),ownerState:X,children:(0,y.jsx)(b.Provider,{value:H,children:P})}))})}))}))}))},9:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/apps/[id]",function(){return n(8252)}])},8252:function(e,t,n){"use strict";n.r(t);var r=n(5893),a=n(7294),s=n(1163),l=n(8262),o=n(2856),c=n(2429),d=n(8111),p=n(5163);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function x(e){return function(e){if(Array.isArray(e))return e}(e)||m(e)||h(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){return function(e){if(Array.isArray(e))return u(e)}(e)||m(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}t.default=function(){var e,t,n=(0,s.useRouter)(),i=(0,d.qD)().user,u=(0,a.useState)(0),m=u[0],h=u[1],v=(0,a.useState)([]),b=v[0],j=v[1],w=(0,a.useState)(0),y=w[0],g=w[1],N=(0,a.useState)(0),S=N[0],k=N[1],Z=(0,a.useState)(!0),W=Z[0],P=Z[1],C=(0,a.useState)(!1),E=C[0],A=C[1],D=(0,a.useState)("none"),B=D[0],M=D[1],T=(0,a.useState)([]),$=T[0],_=T[1],L=(0,c.Qi)(),I=L.wrongPlay,R=L.correctPlay,F=L.skipPlay,O=L.pressPlay,K=(0,d.JJ)(),X=K.params,Y=K.setParams,q=(0,d.Cm)().setLoading,J=(0,d.U3)().setNav,H=(0,c.nm)().changeKey,U=(0,c.J7)(),z=U.duration,Q=U.startTimer,V=(0,c.YE)(i&&p.EP.bestScore(null===X||void 0===X||null===(e=X.game)||void 0===e?void 0:e.id)),G=V.data,ee=V.error;(0,c.Z6)({isLoading:!G&&!ee,error:i,isAuthApi:!0});var te=Math.floor(z.milliseconds()/100),ne=function(e){var t=H(e);W?" "===e.key&&(P(!1),Q()):"Backspace"===e.key?j([]):"Escape"===e.key?ae():E||(O(),m<10&&j(f(b).concat([t.toLowerCase()])))},re=function(e){if(A(!0),j([]),9!==m)setTimeout((function(){A(!1),h(m+1)}),400);else{h(m+1),q(!0),clearInterval();var t={missTap:y,time:z.seconds()+60*z.minutes(),centimes:te,skip:"skip"===e?S+1:S};Y({score:t,game:X.game,bestScore:null===G||void 0===G?void 0:G.bestScore}),J(!0),n.push({pathname:"".concat(n.asPath,"/score")})}},ae=function(){var e=X.game&&m<10&&f($[m].answer);e&&e.sort().join()===b.sort().join()?(M("correct"),R(),re("correct")):(I(),g(y+1),M("wrong"),j([]))};(0,a.useEffect)((function(){var e;0===$.length&&_(function(e){for(var t=x(e).slice(0),n=t.length-1;n>=0;n--){var r,a=Math.floor(Math.random()*(n+1));r=[t[a],t[n]],t[n]=r[0],t[a]=r[1]}return t}(null===(e=X.game)||void 0===e?void 0:e.questions))}),[]),(0,a.useEffect)((function(){"none"!==B&&setTimeout((function(){M("none")}),500)}),[B]),(0,a.useEffect)((function(){"space"===b[0]&&"space"===b[1]&&"space"===b[2]&&(F(),k(S+1),M("skip"),re("skip"))}),[b]);var se=function(e){e.returnValue=""};return(0,a.useEffect)((function(){return document.addEventListener("keydown",ne,!1),window.addEventListener("beforeunload",se),function(){document.removeEventListener("keydown",ne,!1),window.removeEventListener("beforeunload",se)}}),[ne]),(0,r.jsxs)("div",{className:"w-full flex flex-col items-center",children:[(0,r.jsxs)("div",{className:"bg-white flex items-center justify-around relative rounded-md shadow-sm mb-5 w-full",children:[(0,r.jsxs)("div",{className:"bg-white flex items-center absolute top-[-25px] left-[-10px] rounded-lg py-2 px-4 shadow-md",children:[(0,r.jsx)("img",{src:null===X||void 0===X?void 0:X.game.icon,className:"w-10"}),(0,r.jsx)("p",{className:"font-bold text-xl ml-3",children:null===X||void 0===X?void 0:X.game.name})]}),(0,r.jsxs)("div",{className:"w-full flex flex-col p-10 items-center",children:[(0,r.jsxs)("div",{className:"flex w-full justify-around mb-5",children:[(0,r.jsxs)("div",{className:"flex items-baseline",children:[(0,r.jsx)("p",{children:"\u30bf\u30a4\u30e0"}),(0,r.jsx)("div",{className:"font-bold text-2xl ml-3 flex",children:z.minutes()<0?(0,r.jsxs)("div",{className:"flex w-16",children:[(0,r.jsx)("p",{children:"0.0"}),(0,r.jsx)("p",{className:"font-normal ml-2",children:"s"})]}):(0,r.jsxs)("div",{className:"flex w-16",children:[(0,r.jsxs)("p",{children:[z.seconds()+60*z.minutes(),"."]}),(0,r.jsx)("p",{children:te}),(0,r.jsx)("p",{className:"font-normal ml-2",children:"s"})]})})]}),(0,r.jsxs)("div",{className:"flex items-baseline",children:[(0,r.jsx)("p",{children:"\u554f\u984c"}),(0,r.jsxs)("p",{className:"font-bold text-2xl mx-3",children:[10!==m?m+1:10," / 10"]}),(0,r.jsx)("p",{children:"\u554f"})]})]}),(0,r.jsxs)("div",{className:"flex w-full justify-around",children:[(0,r.jsxs)("div",{className:"flex items-baseline",children:[(0,r.jsx)("p",{className:"text-[#888]",children:"\u30b9\u30ad\u30c3\u30d7"}),(0,r.jsx)("p",{className:"font-bold text-2xl mx-3 text-[#555]",children:S}),(0,r.jsx)("p",{className:"text-[#888]",children:"\u56de"})]}),(0,r.jsxs)("div",{className:"flex items-baseline text-[#888]",children:[(0,r.jsx)("p",{className:"text-[#888]",children:"\u30df\u30b9\u30bf\u30c3\u30d7"}),(0,r.jsx)("p",{className:"font-bold text-2xl mx-3 text-[#555]",children:y}),(0,r.jsx)("p",{children:"\u56de"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white shadow-sm w-full rounded-md flex items-center justify-center flex-col p-5 mb-5",children:[(0,r.jsx)("p",{className:"font-bold text-xl mb-4",children:"\u554f\u984c"}),(0,r.jsx)("p",{className:"text-xl ".concat(E&&"animate-animation"),children:W?"\u3000":10!==m&&$[m].content})]}),(0,r.jsxs)("div",{className:"bg-white shadow-sm w-full rounded-md flex items-center justify-center flex-col p-5 relative",children:[(0,r.jsx)("p",{className:"font-bold text-xl mb-4",children:"\u56de\u7b54"}),(0,r.jsx)("p",{className:"absolute top-5 font-bold text-[90px] text-[#25984C]",children:"correct"===B&&"\u25cb"}),(0,r.jsx)("p",{className:"absolute top-3 font-bold text-[100px] text-[#AE2E5C]",children:"wrong"===B&&"\xd7"}),(0,r.jsx)("p",{className:"absolute top-14 font-bold text-4xl text-orange-400 ",children:"skip"===B&&"Skip!"}),(0,r.jsx)("div",{className:"flex justify-center w-full items-center",children:E?(0,r.jsx)("p",{className:"text-xl",children:"\u3000"}):b.length>0?b.map((function(e,t){return(0,r.jsx)("p",{className:"text-xl mx-1",children:e},t)})):(0,r.jsx)("p",{className:"text-xl mx-1 text-[#888]",children:"\u30ad\u30fc\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"})})]}),(0,r.jsxs)("div",{className:"w-full flex items-center justify-around my-8 font-bold",children:[(0,r.jsx)("p",{className:"w-1/3 text-center",children:"Backspace\u3067\u56de\u7b54\u30ea\u30bb\u30c3\u30c8"}),(0,r.jsx)("p",{className:"w-1/3 text-center",children:"Space3\u56de\u306e\u307f\u5165\u529b\u3067\u554f\u984c\u30b9\u30ad\u30c3\u30d7"}),(0,r.jsx)("p",{className:"w-1/3 text-center",children:"Esc\u3067\u56de\u7b54\u9001\u4fe1"})]}),(0,r.jsx)(o.Z,{type:"back"}),(0,r.jsx)(l.Z,{open:W,children:(0,r.jsxs)("div",{className:"flex flex-col py-4 px-10 items-center justify-center font-semibold m-10 bg-white",children:[(0,r.jsx)("p",{className:"font-bold text-2xl",children:"\u30b2\u30fc\u30e0\u30d7\u30ec\u30a4"}),(null===X||void 0===X?void 0:X.game.hasOwnProperty("bestScore"))&&(0,r.jsxs)("div",{className:"flex my-5 items-baseline ",children:[(0,r.jsx)("p",{children:"\u30d9\u30b9\u30c8\u30b9\u30b3\u30a2"}),(0,r.jsx)("p",{className:"ml-3 text-2xl font-bold",children:G?G.bestScore.toLocaleString():null===(t=null===X||void 0===X?void 0:X.game.bestScore)||void 0===t?void 0:t.toLocaleString()})]}),(0,r.jsx)("p",{children:"Space\u30ad\u30fc\u62bc\u4e0b\u3067\u30b9\u30bf\u30fc\u30c8\u3057\u307e\u3059\u3002"}),(0,r.jsx)("p",{className:"text-lg text-center mt-6",children:"\u203b\u30d6\u30e9\u30a6\u30b6\u7279\u6709\u306e\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u304c\u5b9f\u884c\u3055\u308c\u308b\u5834\u5408\u304c\u3042\u308b\u305f\u3081\u56de\u7b54\u306f1\u30ad\u30fc\u305a\u3064\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}),(null===X||void 0===X?void 0:X.game.hasOwnProperty("bestScore"))?(0,r.jsxs)("div",{className:"flex w-[450px] justify-between mt-10",children:[(0,r.jsx)(o.Z,{type:"back"}),(0,r.jsx)(o.Z,{type:"contained",text:"\u30e9\u30f3\u30ad\u30f3\u30b0\u78ba\u8a8d",onClick:function(){var e;return n.push("/apps/".concat(null===(e=n.query)||void 0===e?void 0:e.id,"/ranking"))}})]}):(0,r.jsx)("div",{className:"flex w-[450px] mt-10 justify-center",children:(0,r.jsx)(o.Z,{type:"back"})})]})})]})}}},function(e){e.O(0,[885,630,931,669,715,218,205,774,888,179],(function(){return t=9,e(e.s=t);var t}));var t=e.O();_N_E=t}]);