(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[812],{8262:function(e,r,n){"use strict";n.d(r,{Z:function(){return P}});var t=n(3366),o=n(7462),a=n(7294),i=n(6010),s=n(7192),l=n(7579),c=n(8216),u=n(4024),d=n(6628),p=n(5113),f=n(7623),m=n(4786),h=n(2339);function v(e){return(0,h.Z)("MuiDialog",e)}var x=(0,n(6087).Z)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);var b=(0,a.createContext)({}),g=n(7227),y=n(2734),w=n(5893);const k=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],j=(0,m.ZP)(g.Z,{name:"MuiDialog",slot:"Backdrop",overrides:(e,r)=>r.backdrop})({zIndex:-1}),Z=(0,m.ZP)(u.Z,{name:"MuiDialog",slot:"Root",overridesResolver:(e,r)=>r.root})({"@media print":{position:"absolute !important"}}),C=(0,m.ZP)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,r)=>{const{ownerState:n}=e;return[r.container,r[`scroll${(0,c.Z)(n.scroll)}`]]}})((({ownerState:e})=>(0,o.Z)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===e.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===e.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}))),S=(0,m.ZP)(p.Z,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,r)=>{const{ownerState:n}=e;return[r.paper,r[`scrollPaper${(0,c.Z)(n.scroll)}`],r[`paperWidth${(0,c.Z)(String(n.maxWidth))}`],n.fullWidth&&r.paperFullWidth,n.fullScreen&&r.paperFullScreen]}})((({theme:e,ownerState:r})=>(0,o.Z)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===r.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===r.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!r.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===r.maxWidth&&{maxWidth:"px"===e.breakpoints.unit?Math.max(e.breakpoints.values.xs,444):`${e.breakpoints.values.xs}${e.breakpoints.unit}`,[`&.${x.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},"xs"!==r.maxWidth&&{maxWidth:`${e.breakpoints.values[r.maxWidth]}${e.breakpoints.unit}`,[`&.${x.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[r.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},r.fullWidth&&{width:"calc(100% - 64px)"},r.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${x.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})));var P=a.forwardRef((function(e,r){const n=(0,f.Z)({props:e,name:"MuiDialog"}),u=(0,y.Z)(),m={enter:u.transitions.duration.enteringScreen,exit:u.transitions.duration.leavingScreen},{"aria-describedby":h,"aria-labelledby":x,BackdropComponent:g,BackdropProps:P,children:N,className:W,disableEscapeKeyDown:D=!1,fullScreen:A=!1,fullWidth:E=!1,maxWidth:R="sm",onBackdropClick:B,onClose:M,open:_,PaperComponent:$=p.Z,PaperProps:T={},scroll:F="paper",TransitionComponent:L=d.Z,transitionDuration:X=m,TransitionProps:I}=n,O=(0,t.Z)(n,k),V=(0,o.Z)({},n,{disableEscapeKeyDown:D,fullScreen:A,fullWidth:E,maxWidth:R,scroll:F}),q=(e=>{const{classes:r,scroll:n,maxWidth:t,fullWidth:o,fullScreen:a}=e,i={root:["root"],container:["container",`scroll${(0,c.Z)(n)}`],paper:["paper",`paperScroll${(0,c.Z)(n)}`,`paperWidth${(0,c.Z)(String(t))}`,o&&"paperFullWidth",a&&"paperFullScreen"]};return(0,s.Z)(i,v,r)})(V),K=a.useRef(),U=(0,l.Z)(x),H=a.useMemo((()=>({titleId:U})),[U]);return(0,w.jsx)(Z,(0,o.Z)({className:(0,i.Z)(q.root,W),BackdropProps:(0,o.Z)({transitionDuration:X,as:g},P),closeAfterTransition:!0,BackdropComponent:j,disableEscapeKeyDown:D,onClose:M,open:_,ref:r,onClick:e=>{K.current&&(K.current=null,B&&B(e),M&&M(e,"backdropClick"))},ownerState:V},O,{children:(0,w.jsx)(L,(0,o.Z)({appear:!0,in:_,timeout:X,role:"presentation"},I,{children:(0,w.jsx)(C,{className:(0,i.Z)(q.container),onMouseDown:e=>{K.current=e.target===e.currentTarget},ownerState:V,children:(0,w.jsx)(S,(0,o.Z)({as:$,elevation:24,role:"dialog","aria-describedby":h,"aria-labelledby":U},T,{className:(0,i.Z)(q.paper,T.className),ownerState:V,children:(0,w.jsx)(b.Provider,{value:H,children:N})}))})}))}))}))},7747:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register/confirm",function(){return n(8768)}])},2856:function(e,r,n){"use strict";var t=n(5893),o=n(2630),a=n(1163);r.Z=function(e){var r=e.text,n=e.type,i=void 0===n?"contained":n,s=e.width,l=void 0===s?"200px":s,c=e.onClick,u=e.disable,d=void 0!==u&&u,p=(0,a.useRouter)(),f="contained"===i?{width:l,backgroundColor:"#1C73BD",borderRadius:"10px",boxShadow:"none","&:hover":{backgroundColor:"#065DA6",boxShadow:"none"},"&:active":{backgroundColor:"#065DA6",boxShadow:"none"},"&:focus":{backgroundColor:"#065DA6",boxShadow:"none"}}:{width:l,fontWeight:"bold",backgroundColor:"rgba(255,255,255,0.5)",border:"3px solid",borderColor:"#1C73BD",color:"#1C73BD",borderRadius:"10px","&:hover":{backgroundColor:"rgba(200,200,200,0.2)",border:"3px solid",borderColor:"#065DA6",color:"#065DA6"},"&:active":{backgroundColor:"rgba(200,200,200,0.2)",border:"3px solid",borderColor:"#065DA6",color:"#065DA6"},"&:focus":{backgroundColor:"rgba(200,200,200,0.2)",border:"3px solid",borderColor:"#065DA6",color:"#065DA6"}};return(0,t.jsx)(o.Z,{sx:f,variant:"contained"===i?"contained":"outlined",color:"primary",onClick:"back"===i?function(){return p.back()}:c,disabled:d,children:r||"\u623b\u308b"})}},5163:function(e,r,n){"use strict";n.d(r,{EP:function(){return l},bf:function(){return c},VZ:function(){return u},Tn:function(){return d}});var t=n(4051),o=n.n(t),a=n(9669),i=n.n(a)().create({baseURL:"https://api.ks-typing.tk/",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},responseType:"json",timeout:15e3,withCredentials:!0});function s(e,r,n,t,o,a,i){try{var s=e[a](i),l=s.value}catch(c){return void n(c)}s.done?r(l):Promise.resolve(l).then(t,o)}var l={apps:function(){return"/api/app"},bestScore:function(e){return"/api/app/".concat(e)},appScore:function(e){return"/api/app/".concat(e,"/score")},appRanking:function(e){return"/api/app/".concat(e,"/ranking")},login:function(){return"/api/auth/login"},logout:function(){return"/api/auth/logout"},auth:function(){return"/api/auth/email"},register:function(){return"/api/user/register"},profile:function(e){return"/api/user/".concat(e)},userEdit:function(){return"/api/user/edit"},top:function(){return"/api/user"},notification:function(){return"/api/notification"},titles:function(){return"/api/user/titles"},sanctum:function(){return"/sanctum/csrf-cookie"}},c=function(){var e,r=(e=o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.get(r).then((function(e){return e})).catch((function(e){throw(null===e||void 0===e?void 0:e.message.startsWith("Network Error"))&&(e.response={message:"Network Error"}),e.response})));case 1:case"end":return e.stop()}}),e)})),function(){var r=this,n=arguments;return new Promise((function(t,o){var a=e.apply(r,n);function i(e){s(a,t,o,i,l,"next",e)}function l(e){s(a,t,o,i,l,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}(),u=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.post(e,JSON.stringify(r)).then((function(e){return{data:e.data,err:void 0}})).catch((function(e){return{data:null,err:e.response}}))},d=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.put(e,r).then((function(e){return{data:e,err:void 0}})).catch((function(e){return{data:void 0,err:e.response}}))}},4010:function(e,r,n){"use strict";n.d(r,{a:function(){return c}});var t=n(4051),o=n.n(t),a=n(4931),i=n(5163),s=n(8111);function l(e,r,n,t,o,a,i){try{var s=e[a](i),l=s.value}catch(c){return void n(c)}s.done?r(l):Promise.resolve(l).then(t,o)}var c=function(){var e=(0,s.Cm)().setLoading,r=(0,s.qD)().setUser,n=function(){var r,n=(r=o().mark((function r(n){var t,s,l,c,u,d,p,f,m;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=n.email,s=n.password,l=n.callback,e(!0),r.next=6,(0,i.bf)(i.EP.sanctum());case 6:return d={email:t,password:s},r.next=9,(0,i.VZ)(i.EP.login(),d);case 9:if(p=r.sent,f=p.data,m=p.err,u=m,!(c=f)||u){r.next=18;break}return l&&l(c),e(!1),r.abrupt("return");case 18:e(!1),a.ZP.error(m.data.message);case 20:case"end":return r.stop()}}),r)})),function(){var e=this,n=arguments;return new Promise((function(t,o){var a=r.apply(e,n);function i(e){l(a,t,o,i,s,"next",e)}function s(e){l(a,t,o,i,s,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}();return{login:n,logout:function(){r(void 0),(0,i.VZ)(i.EP.logout())}}}},8768:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return y}});var t=n(4051),o=n.n(t),a=n(5893),i=n(7294),s=n(1163),l=n(4931),c=n(7070),u=n(8262),d=function(e){var r=e.label,n=e.value,t=e.isMultiLine,o=void 0!==t&&t,i=e.isPassword,s=void 0!==i&&i;return(0,a.jsxs)("div",{className:"border-[1px] border-solid border-gray-400 flex items-center rounded-md w-full ".concat(!o&&"h-[90px]"),children:[(0,a.jsxs)("div",{className:"border-r-[1px] border-solid border-gray-400 border-t-0 w-[30%] h-full border-b-0 border-l-0 flex items-center justify-center text-gray-600 flex-col ".concat(o?"h-[210px]":"h-[90px]"),children:[(0,a.jsx)("p",{children:r}),(0,a.jsx)("p",{className:"text-xs",children:"\u30e6\u30fc\u30b6\u30fc\u540d"===r&&"(\u4ed6\u30e6\u30fc\u30b6\u30fc\u306b\u8868\u793a\u3055\u308c\u307e\u3059)"})]}),o?n:(0,a.jsx)("p",{className:"w-[70%] mx-5 bg-gray-100 h-2/3 flex items-center px-5 rounded-md text-[#333]",children:s?(0,a.jsx)("input",{value:n,type:"password",disabled:!0,className:"border-0"}):n})]})},p=n(2856),f=n(4010),m=n(8111),h=n(5163);function v(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function x(e,r,n,t,o,a,i){try{var s=e[a](i),l=s.value}catch(c){return void n(c)}s.done?r(l):Promise.resolve(l).then(t,o)}function b(e){return function(){var r=this,n=arguments;return new Promise((function(t,o){var a=e.apply(r,n);function i(e){x(a,t,o,i,s,"next",e)}function s(e){x(a,t,o,i,s,"throw",e)}i(void 0)}))}}function g(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return v(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=function(){var e=(0,s.useRouter)(),r=(0,m.JJ)().params,n=(0,m.qD)().setUser,t=(0,m.Cm)().setLoading,v=(0,f.a)().login,x=(0,i.useState)(!1),y=x[0],w=x[1],k=(0,i.useState)(["","","","","",""]),j=k[0],Z=k[1],C=(0,i.useState)(0),S=C[0],P=C[1],N=(0,i.useState)(),W=N[0],D=N[1],A=(0,i.useState)(0),E=A[0],R=A[1],B=function(){var t=b(o().mark((function t(){var a,i,s,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="",j.map((function(e){return a+=e})),t.next=4,(0,h.VZ)(h.EP.register(),{name:null===r||void 0===r?void 0:r.name,email:null===r||void 0===r?void 0:r.email,password:null===r||void 0===r?void 0:r.password,code:a});case 4:i=t.sent,s=i.data,(c=i.err)?l.ZP.error(c.data.message):(v({email:null===r||void 0===r?void 0:r.email,password:null===r||void 0===r?void 0:r.password}),n({id:s.id,name:null===r||void 0===r?void 0:r.name,icon:"",email:null===r||void 0===r?void 0:r.email,level:1,level_point:0,play_time:0,clear_times:0,title:{id:19,name:"ks typing player",url:"https://ks-icons.s3.ap-northeast-1.amazonaws.com/ksp.png"}}),l.ZP.success("\u4f1a\u54e1\u767b\u9332\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f"),e.push("/register/complete"));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=function(){var e=b(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.next=3,(0,h.VZ)(h.EP.auth(),{email:null===r||void 0===r?void 0:r.email});case 3:n=e.sent.err,t(!1),n?l.ZP.error(n.data.message):(w(!0),R(E+1));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){var e="";j.map((function(r){e+=r,""===r&&D("\u8a8d\u8a3c\u30b3\u30fc\u30c9\u306f6\u6841\u306e\u534a\u89d2\u6570\u5b57\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044")}));var r=Number(e);!isNaN(r)&&6===e.length&&D(void 0)}),[j]);var _=[(0,i.useRef)(null),(0,i.useRef)(null),(0,i.useRef)(null),(0,i.useRef)(null),(0,i.useRef)(null),(0,i.useRef)(null)],$=function(e){var r=function(){S<5&&(_[S+1].current.focus(),P(S+1))},n=function(){S>0&&(_[S-1].current.focus(),P(S-1))};if(["1","2","3","4","5","6","7","8","9","0","Backspace"].includes(e.key)){var t="Backspace"!==e.key?[0!==S?j[0]:e.key,1!==S?j[1]:e.key,2!==S?j[2]:e.key,3!==S?j[3]:e.key,4!==S?j[4]:e.key,5!==S?j[5]:e.key]:[0===S?"":1!==S||j[1]?j[0]:"",1===S?"":2!==S||j[2]?j[1]:"",2===S?"":3!==S||j[3]?j[2]:"",3===S?"":4!==S||j[4]?j[3]:"",4===S?"":5!==S||j[5]?j[4]:"",5===S?"":j[5]];Z(g(t)),"Backspace"!==e.key?r():!j[S]&&n()}"ArrowLeft"===e.key&&n(),"ArrowRight"===e.key&&r()};return(0,i.useEffect)((function(){return document.addEventListener("keydown",$,!1),function(){document.removeEventListener("keydown",$,!1)}}),[$]),(0,a.jsxs)("div",{children:[(0,a.jsxs)("form",{className:"flex flex-col justify-center items-center w-full bg-white p-10 relative rounded-md",children:[(0,a.jsxs)("div",{className:"flex items-center absolute top-11 left-10 hover:text-[#888]",onClick:function(){e.push("/register/?edit=true")},children:[(0,a.jsx)(c.lrP,{}),(0,a.jsx)("p",{children:"\u767b\u9332\u5185\u5bb9\u306e\u4fee\u6b63"})]}),(0,a.jsx)("h2",{className:"mb-5",children:"\u767b\u9332\u78ba\u8a8d"}),(0,a.jsx)("div",{className:"w-4/5 my-5",children:(0,a.jsx)(d,{label:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",value:null===r||void 0===r?void 0:r.email})}),(0,a.jsx)("div",{className:"w-4/5 mb-5",children:(0,a.jsx)(d,{label:"\u30d1\u30b9\u30ef\u30fc\u30c9",value:null===r||void 0===r?void 0:r.password,isPassword:!0})}),(0,a.jsx)("div",{className:"w-4/5 mb-10",children:(0,a.jsx)(d,{label:"\u30e6\u30fc\u30b6\u30fc\u540d",value:null===r||void 0===r?void 0:r.name})}),(0,a.jsx)("p",{className:"my-3",children:"\u4e0a\u8a18\u5185\u5bb9\u3067\u767b\u9332\u3057\u307e\u3059\u3002\u3088\u308d\u3057\u3051\u308c\u3070\u30e1\u30fc\u30eb\u9001\u4fe1\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u304f\u3060\u3055\u3044"}),(0,a.jsx)("p",{className:"mb-10",children:"\u5c4a\u3044\u305f\u30e1\u30fc\u30eb\u306b\u8a18\u8f09\u3055\u308c\u305f6\u6841\u306e\u8a8d\u8a3c\u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"}),(0,a.jsx)(p.Z,{onClick:M,text:E>0?"\u30e1\u30fc\u30eb\u518d\u9001":"\u30e1\u30fc\u30eb\u9001\u4fe1",type:"outlined"}),E>1&&(0,a.jsx)("p",{className:"mt-2",children:"\u203b\u30e1\u30fc\u30eb\u3092\u518d\u9001\u3059\u308b\u3068\u6700\u65b0\u306e\u8a8d\u8a3c\u30b3\u30fc\u30c9\u306e\u307f\u304c\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002"}),E>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-3/5 flex items-center justify-around my-10",children:g(Array(6)).map((function(e,r){return(0,a.jsx)("input",{className:"w-[12%] text-[50px] text-center h-[100px] border-0 bg-gray-100 rounded-md",value:j[r],type:"tel",ref:_[r],onFocus:function(){P(r)}},r)}))}),(0,a.jsx)("p",{className:"mb-5 text-red-500",children:W}),(0,a.jsx)(p.Z,{onClick:B,text:"\u767b\u9332",disable:!!W})]})]}),(0,a.jsx)(u.Z,{open:y,onClose:function(){return w(!1)},children:(0,a.jsxs)("div",{className:"flex flex-col py-10 px-20 items-center justify-center font-semibold",children:[(0,a.jsx)("p",{className:"font-bold text-xl mb-5",children:"\u30e1\u30fc\u30eb\u304c\u9001\u4fe1\u3055\u308c\u307e\u3057\u305f"}),(0,a.jsx)("p",{children:"\u30e1\u30fc\u30eb\u304c\u5c4a\u304b\u306a\u3044\u5834\u5408"}),(0,a.jsxs)("div",{className:"flex flex-col mt-3 mb-7 font-normal",children:[(0,a.jsx)("p",{className:"mb-2",children:"\u25a0 \u8ff7\u60d1\u30e1\u30fc\u30eb\u30d5\u30a9\u30eb\u30c0\u306b\u5165\u3063\u3066\u3044\u306a\u3044\u304b\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002"}),(0,a.jsx)("p",{className:"mb-2",children:"\u25a0 \u300cinfo@ks-typing.tk\u300d\u304b\u3089\u306e\u30e1\u30fc\u30eb\u3092\u53d7\u3051\u53d6\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}),E>1&&(0,a.jsx)("p",{children:"\u203b\u30e1\u30fc\u30eb\u3092\u518d\u9001\u3059\u308b\u3068\u6700\u65b0\u306e\u8a8d\u8a3c\u30b3\u30fc\u30c9\u306e\u307f\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002"})]}),(0,a.jsx)(p.Z,{onClick:function(){return w(!1)},text:"\u9589\u3058\u308b",type:"outlined"})]})}),(0,a.jsx)(l.x7,{position:"bottom-center"})]})}}},function(e){e.O(0,[630,931,669,715,774,888,179],(function(){return r=7747,e(e.s=r);var r}));var r=e.O();_N_E=r}]);