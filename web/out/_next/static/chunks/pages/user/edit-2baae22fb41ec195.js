(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[845],{8262:function(e,r,o){"use strict";o.d(r,{Z:function(){return P}});var n=o(3366),t=o(7462),i=o(7294),a=o(6010),l=o(7192),c=o(7579),s=o(8216),d=o(4024),u=o(6628),p=o(5113),f=o(7623),b=o(4786),h=o(2339);function x(e){return(0,h.Z)("MuiDialog",e)}var m=(0,o(6087).Z)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);var v=(0,i.createContext)({}),g=o(7227),w=o(2734),k=o(5893);const y=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],C=(0,b.ZP)(g.Z,{name:"MuiDialog",slot:"Backdrop",overrides:(e,r)=>r.backdrop})({zIndex:-1}),Z=(0,b.ZP)(d.Z,{name:"MuiDialog",slot:"Root",overridesResolver:(e,r)=>r.root})({"@media print":{position:"absolute !important"}}),j=(0,b.ZP)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,r)=>{const{ownerState:o}=e;return[r.container,r[`scroll${(0,s.Z)(o.scroll)}`]]}})((({ownerState:e})=>(0,t.Z)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===e.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===e.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}))),S=(0,b.ZP)(p.Z,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,r)=>{const{ownerState:o}=e;return[r.paper,r[`scrollPaper${(0,s.Z)(o.scroll)}`],r[`paperWidth${(0,s.Z)(String(o.maxWidth))}`],o.fullWidth&&r.paperFullWidth,o.fullScreen&&r.paperFullScreen]}})((({theme:e,ownerState:r})=>(0,t.Z)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===r.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===r.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!r.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===r.maxWidth&&{maxWidth:"px"===e.breakpoints.unit?Math.max(e.breakpoints.values.xs,444):`${e.breakpoints.values.xs}${e.breakpoints.unit}`,[`&.${m.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},"xs"!==r.maxWidth&&{maxWidth:`${e.breakpoints.values[r.maxWidth]}${e.breakpoints.unit}`,[`&.${m.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[r.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},r.fullWidth&&{width:"calc(100% - 64px)"},r.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${m.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})));var P=i.forwardRef((function(e,r){const o=(0,f.Z)({props:e,name:"MuiDialog"}),d=(0,w.Z)(),b={enter:d.transitions.duration.enteringScreen,exit:d.transitions.duration.leavingScreen},{"aria-describedby":h,"aria-labelledby":m,BackdropComponent:g,BackdropProps:P,children:W,className:D,disableEscapeKeyDown:N=!1,fullScreen:_=!1,fullWidth:R=!1,maxWidth:B="sm",onBackdropClick:A,onClose:E,open:M,PaperComponent:O=p.Z,PaperProps:T={},scroll:$="paper",TransitionComponent:q=u.Z,transitionDuration:F=b,TransitionProps:z}=o,X=(0,n.Z)(o,y),I=(0,t.Z)({},o,{disableEscapeKeyDown:N,fullScreen:_,fullWidth:R,maxWidth:B,scroll:$}),K=(e=>{const{classes:r,scroll:o,maxWidth:n,fullWidth:t,fullScreen:i}=e,a={root:["root"],container:["container",`scroll${(0,s.Z)(o)}`],paper:["paper",`paperScroll${(0,s.Z)(o)}`,`paperWidth${(0,s.Z)(String(n))}`,t&&"paperFullWidth",i&&"paperFullScreen"]};return(0,l.Z)(a,x,r)})(I),H=i.useRef(),L=(0,c.Z)(m),V=i.useMemo((()=>({titleId:L})),[L]);return(0,k.jsx)(Z,(0,t.Z)({className:(0,a.Z)(K.root,D),BackdropProps:(0,t.Z)({transitionDuration:F,as:g},P),closeAfterTransition:!0,BackdropComponent:C,disableEscapeKeyDown:N,onClose:E,open:M,ref:r,onClick:e=>{H.current&&(H.current=null,A&&A(e),E&&E(e,"backdropClick"))},ownerState:I},X,{children:(0,k.jsx)(q,(0,t.Z)({appear:!0,in:M,timeout:F,role:"presentation"},z,{children:(0,k.jsx)(j,{className:(0,a.Z)(K.container),onMouseDown:e=>{H.current=e.target===e.currentTarget},ownerState:I,children:(0,k.jsx)(S,(0,t.Z)({as:O,elevation:24,role:"dialog","aria-describedby":h,"aria-labelledby":L},T,{className:(0,a.Z)(K.paper,T.className),ownerState:I,children:(0,k.jsx)(v.Provider,{value:V,children:W})}))})}))}))}))},3795:function(e,r,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/edit",function(){return o(4007)}])},2856:function(e,r,o){"use strict";var n=o(5893),t=o(2630),i=o(1163);r.Z=function(e){var r=e.text,o=e.type,a=void 0===o?"contained":o,l=e.width,c=void 0===l?"200px":l,s=e.onClick,d=e.disable,u=void 0!==d&&d,p=(0,i.useRouter)(),f="contained"===a?{width:c,backgroundColor:"#1C73BD",borderRadius:"10px",boxShadow:"none","&:hover":{backgroundColor:"#065DA6",boxShadow:"none"},"&:active":{backgroundColor:"#065DA6",boxShadow:"none"},"&:focus":{backgroundColor:"#065DA6",boxShadow:"none"}}:{width:c,fontWeight:"bold",backgroundColor:"rgba(255,255,255,0.5)",border:"3px solid",borderColor:"#1C73BD",color:"#1C73BD",borderRadius:"10px","&:hover":{backgroundColor:"rgba(200,200,200,0.2)",border:"3px solid",borderColor:"#065DA6",color:"#065DA6"},"&:active":{backgroundColor:"rgba(200,200,200,0.2)",border:"3px solid",borderColor:"#065DA6",color:"#065DA6"},"&:focus":{backgroundColor:"rgba(200,200,200,0.2)",border:"3px solid",borderColor:"#065DA6",color:"#065DA6"}};return(0,n.jsx)(t.Z,{sx:f,variant:"contained"===a?"contained":"outlined",color:"primary",onClick:"back"===a?function(){return p.back()}:s,disabled:u,children:r||"\u623b\u308b"})}},4443:function(e,r,o){"use strict";var n=o(5893),t=o(162);function i(e,r,o){return r in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,e}function a(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{},n=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(r){i(e,r,o[r])}))}return e}r.Z=function(e){var r,o,i=e.errors,l=e.schema,c=e.register,s=e.label,d=e.defaultValue;return(0,n.jsxs)("div",{className:"border-[1px] border-solid border-gray-400 flex items-center rounded-md w-full h-[90px]",children:[(0,n.jsxs)("div",{className:"border-r-[1px] border-solid border-gray-400 border-t-0 w-[30%] h-full border-b-0 border-l-0 flex items-center justify-center text-gray-600 flex-col",children:[(0,n.jsx)("p",{children:s}),(0,n.jsx)("p",{className:"text-xs",children:"name"===l&&"(\u4ed6\u30e6\u30fc\u30b6\u30fc\u306b\u8868\u793a\u3055\u308c\u307e\u3059)"})]}),(0,n.jsx)(t.Z,a({id:"filled-error-helper-text",label:"".concat(s,"\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"),variant:"filled"},c(l),{error:null===(r=i[l])||void 0===r?void 0:r.message,helperText:null===(o=i[l])||void 0===o?void 0:o.message,sx:{width:"70%",padding:"5px"},defaultValue:d,type:l.indexOf("pass")>-1?"password":"text"}))]})}},8735:function(e,r,o){"use strict";var n=o(5893);r.Z=function(e){var r=e.title,o=e.onClick,t=e.width,i=void 0===t?"m":t,a=e.selected,l=e.isMb,c=void 0===l||l,s=r.name.indexOf("Master")>-1?"border-[#d6c25b]":"border-gray-300",d="s"===i?"w-[100px]":"m"===i?"w-[250px]":"w-[24%]",u=r.id===(null===a||void 0===a?void 0:a.id)?"border-[#1C73BD] border-4":"border-2 ".concat(s);return(0,n.jsx)("img",{src:r.url,className:"rounded-md shadow-md border-solid ".concat(d," ").concat(u," ").concat(c&&"mb-2"),onClick:function(){return o&&o(r)}})}},5163:function(e,r,o){"use strict";o.d(r,{EP:function(){return c},bf:function(){return s},VZ:function(){return d},Tn:function(){return u}});var n=o(4051),t=o.n(n),i=o(9669),a=o.n(i)().create({baseURL:"https://api.ks-typing.tk/",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},responseType:"json",timeout:15e3,withCredentials:!0});function l(e,r,o,n,t,i,a){try{var l=e[i](a),c=l.value}catch(s){return void o(s)}l.done?r(c):Promise.resolve(c).then(n,t)}var c={apps:function(){return"/api/app"},bestScore:function(e){return"/api/app/".concat(e)},appScore:function(e){return"/api/app/".concat(e,"/score")},appRanking:function(e){return"/api/app/".concat(e,"/ranking")},login:function(){return"/api/auth/login"},logout:function(){return"/api/auth/logout"},auth:function(){return"/api/auth/email"},register:function(){return"/api/user/register"},profile:function(e){return"/api/user/".concat(e)},userEdit:function(){return"/api/user/edit"},top:function(){return"/api/user"},notification:function(){return"/api/notification"},titles:function(){return"/api/user/titles"},sanctum:function(){return"/sanctum/csrf-cookie"}},s=function(){var e,r=(e=t().mark((function e(r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.get(r).then((function(e){return e})).catch((function(e){throw(null===e||void 0===e?void 0:e.message.startsWith("Network Error"))&&(e.response={message:"Network Error"}),e.response})));case 1:case"end":return e.stop()}}),e)})),function(){var r=this,o=arguments;return new Promise((function(n,t){var i=e.apply(r,o);function a(e){l(i,n,t,a,c,"next",e)}function c(e){l(i,n,t,a,c,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}(),d=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.post(e,JSON.stringify(r)).then((function(e){return{data:e.data,err:void 0}})).catch((function(e){return{data:null,err:e.response}}))},u=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.put(e,r).then((function(e){return{data:e,err:void 0}})).catch((function(e){return{data:void 0,err:e.response}}))}},4007:function(e,r,o){"use strict";o.r(r),o.d(r,{default:function(){return C}});var n=o(4051),t=o.n(n),i=o(5893),a=o(7294),l=o(1163),c=o(7536),s=o(5496),d=o(2630),u=o(8262),p=o(4931),f=o(2856);function b(e,r,o,n,t,i,a){try{var l=e[i](a),c=l.value}catch(s){return void o(s)}l.done?r(c):Promise.resolve(c).then(n,t)}var h=function(e){var r=e.text,o=e.width,n=void 0===o?"100px":o,a=e.height,l=void 0===a?"30px":a,c=e.disable,s=void 0!==c&&c,u=e.setFile,f=function(){var e,r=(e=t().mark((function e(r){var o,n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==r.target.files&&0!==r.target.files.length){e.next=2;break}return e.abrupt("return",!1);case 2:if(o=r.target.files[0],n=5e6,["image/jpeg","image/jpg","image/png"].includes(o.type)){e.next=7;break}return p.ZP.error("jpeg, ,png \u306e\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),e.abrupt("return",!1);case 7:if(!(o.size>n)){e.next=10;break}return p.ZP.error("\u753b\u50cf\u306f5MB\u4ee5\u4e0b\u306e\u753b\u50cf\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),e.abrupt("return",!1);case 10:new Promise((function(e,r){var n=new FileReader;n.onload=function(r){var o;e(null===(o=r.target)||void 0===o?void 0:o.result)},n.onerror=function(e){return r(e)},n.readAsDataURL(o)})).then((function(e){u(e)})).catch((function(e){p.ZP.error(e)}));case 11:case"end":return e.stop()}}),e)})),function(){var r=this,o=arguments;return new Promise((function(n,t){var i=e.apply(r,o);function a(e){b(i,n,t,a,l,"next",e)}function l(e){b(i,n,t,a,l,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}(),h={width:n,fontWeight:"bold",backgroundColor:"rgba(255,255,255,0.5)",border:"3px solid",borderColor:"#858585",color:"#858585",borderRadius:"10px",height:l,"&:hover":{backgroundColor:"rgba(200,200,200,0.2)",border:"3px solid",borderColor:"#4d4d4d",color:"#4d4d4d"},"&:active":{backgroundColor:"rgba(200,200,200,0.2)",border:"3px solid",borderColor:"#4d4d4d",color:"#4d4d4d"},"&:focus":{backgroundColor:"rgba(200,200,200,0.2)",border:"3px solid",borderColor:"#4d4d4d",color:"#4d4d4d"}};return(0,i.jsxs)(d.Z,{sx:h,variant:"outlined",disabled:s,component:"label",children:[r||"\u5199\u771f\u9078\u629e",(0,i.jsx)("input",{type:"file",accept:"image/*",name:"fileInput",onChange:f,className:"hidden"}),(0,i.jsx)(p.x7,{position:"bottom-center"})]})},x=o(4443),m=o(1056),v=o(8735),g=o(8111),w=o(2148),k=o(5163);function y(e,r,o,n,t,i,a){try{var l=e[i](a),c=l.value}catch(s){return void o(s)}l.done?r(c):Promise.resolve(c).then(n,t)}var C=function(){var e,r=(0,l.useRouter)(),o=(0,g.qD)(),n=o.user,b=o.setUser,C=(0,g.JJ)().params,Z=(0,a.useState)(),j=Z[0],S=Z[1],P=(0,a.useState)(!1),W=P[0],D=P[1],N=(0,a.useState)(null===C||void 0===C?void 0:C.title),_=N[0],R=N[1],B=(0,c.cI)({resolver:(0,s.X)(w.CG)}),A=B.register,E=B.handleSubmit,M=B.formState.errors,O=function(){var e,o=(e=t().mark((function e(o){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.Tn)(k.EP.userEdit(),{name:o.name,icon:j?String(j):n.icon,title_id:_.id});case 2:(i=e.sent.err)?p.ZP.error(i.data.message):(b({id:n.id,name:o.name,icon:j?String(j):n.icon,title:_,email:n.email,level:n.level,level_point:n.level_point,play_time:n.play_time,clear_times:n.clear_times}),p.ZP.success("\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3057\u305f"),r.back());case 4:case"end":return e.stop()}}),e)})),function(){var r=this,o=arguments;return new Promise((function(n,t){var i=e.apply(r,o);function a(e){y(i,n,t,a,l,"next",e)}function l(e){y(i,n,t,a,l,"throw",e)}a(void 0)}))});return function(e){return o.apply(this,arguments)}}();return(0,i.jsxs)("div",{className:"flex flex-col w-full items-center bg-white p-10",children:[(0,i.jsx)("h2",{children:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u7de8\u96c6"}),(0,i.jsxs)("div",{className:"my-5 flex flex-col items-center",children:[(0,i.jsx)("div",{className:"my-3",children:(0,i.jsx)(m.Z,{src:j?String(j):null===n||void 0===n?void 0:n.icon,size:150})}),(0,i.jsx)(h,{setFile:S})]}),(0,i.jsx)("div",{className:"w-full mb-10",children:(0,i.jsx)(x.Z,{register:A,errors:M,schema:"name",label:"\u30e6\u30fc\u30b6\u30fc\u540d",defaultValue:null===n||void 0===n?void 0:n.name})}),(0,i.jsxs)("div",{className:"border-[1px] border-solid border-gray-400 flex items-center rounded-md w-full h-[90px] mb-10",children:[(0,i.jsx)("div",{className:"border-r-[1px] border-solid border-gray-400 border-t-0 w-[30%] h-full border-b-0 border-l-0 flex items-center justify-center text-gray-600 flex-col",children:(0,i.jsx)("p",{children:"\u79f0\u53f7"})}),(0,i.jsxs)("div",{className:"flex items-center justify-between w-[70%] px-5",children:[_&&(0,i.jsx)(v.Z,{title:_,width:"m"}),(0,i.jsx)(d.Z,{sx:{width:"100px",fontWeight:"bold",backgroundColor:"rgba(255,255,255,0.5)",border:"3px solid",borderColor:"#858585",color:"#858585",borderRadius:"10px",height:"30px","&:hover":{backgroundColor:"rgba(200,200,200,0.2)",border:"3px solid",borderColor:"#4d4d4d",color:"#4d4d4d"},"&:active":{backgroundColor:"rgba(200,200,200,0.2)",border:"3px solid",borderColor:"#4d4d4d",color:"#4d4d4d"},"&:focus":{backgroundColor:"rgba(200,200,200,0.2)",border:"3px solid",borderColor:"#4d4d4d",color:"#4d4d4d"}},variant:"outlined",onClick:function(){return D(!0)},children:"\u79f0\u53f7\u9078\u629e"})]})]}),(0,i.jsxs)("div",{className:"flex w-3/5 justify-between",children:[(0,i.jsx)(f.Z,{type:"back"}),(0,i.jsx)(f.Z,{onClick:E(O),text:"\u7de8\u96c6"})]}),(0,i.jsx)(u.Z,{open:W,onClose:function(){return D(!1)},children:(0,i.jsxs)("div",{className:"flex flex-col py-10 px-20 items-center justify-center font-semibold",children:[(0,i.jsx)("p",{className:"font-bold text-xl",children:"\u53d6\u5f97\u3057\u305f\u79f0\u53f7"}),(0,i.jsx)("div",{className:"flex mt-5 w-full justify-between",children:(0,i.jsx)("div",{className:"w-full flex my-1 items-center justify-between flex-col",children:null===C||void 0===C||null===(e=C.titles)||void 0===e?void 0:e.map((function(e,r){return(0,i.jsx)(v.Z,{width:"m",title:e,onClick:R,selected:_},r)}))})}),(0,i.jsx)(f.Z,{onClick:function(){return D(!1)},text:"\u9589\u3058\u308b",type:"outlined",width:"150px"})]})})]})}},2148:function(e,r,o){"use strict";o.d(r,{pj:function(){return c},Tu:function(){return s},CG:function(){return d}});var n=o(4231),t="\u306f\u5fc5\u9808\u9805\u76ee\u3067\u3059\u3002",i="\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",a="\u6b63\u3057\u3044\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",l="\u82f1\u5b57\u3068\u6570\u5b57\u3092\u542b\u3081\u305f8-24\u6587\u5b57\u3067\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002",c=n.Ry().shape({email:n.Z_().email(a).required("\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9".concat(t)),password:n.Z_().matches(/(?=.*[a-z])(?=.*[0-9])[0-9a-zA-Z]{8,64}/,l).required("\u30d1\u30b9\u30ef\u30fc\u30c9".concat(t))}),s=n.Ry().shape({email:n.Z_().email(a).required("\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9".concat(t)),password:n.Z_().matches(/(?=.*[a-z])(?=.*[0-9])[0-9a-zA-Z]{8,64}/,l).required("\u30d1\u30b9\u30ef\u30fc\u30c9".concat(t)),passConfirm:n.Z_().matches(/(?=.*[a-z])(?=.*[0-9])[0-9a-zA-Z]{8,64}/,l).required("\u30d1\u30b9\u30ef\u30fc\u30c9".concat(t)).oneOf([n.iH("password")],"\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093\u3002"),name:n.Z_().max(20,"20\u6587\u5b57".concat(i)).required("\u30e6\u30fc\u30b6\u30fc\u540d".concat(t))}),d=n.Ry().shape({icon:n.nK(),name:n.Z_().max(20,"20\u6587\u5b57".concat(i)).required("\u30e6\u30fc\u30b6\u30fc\u540d".concat(t))})}},function(e){e.O(0,[630,931,669,715,53,774,888,179],(function(){return r=3795,e(e.s=r);var r}));var r=e.O();_N_E=r}]);